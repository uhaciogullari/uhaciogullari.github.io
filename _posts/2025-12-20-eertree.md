---
layout: post
title: "Eertree - an interactive guide"
date: 2025-12-20 23:08:22 +0200
categories: [Data Structures]
---


<script src="https://cdnjs.cloudflare.com/ajax/libs/viz.js/2.1.2/viz.js"
        integrity="sha512-vnRdmX8ZxbU+IhA2gLhZqXkX1neJISG10xy0iP0WauuClu3AIMknxyDjYHEpEhi8fTZPyOCWgqUCnEafDB/jVQ=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/viz.js/2.1.2/full.render.js"
        integrity="sha512-1zKK2bG3QY2JaUPpfHZDUMe3dwBwFdCDwXQ01GrKSd+/l0hqPbF+aak66zYPUZtn+o2JYi1mjXAqy5mW04v3iA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="/assets/js/eertree.js"></script>
<script src="/assets/js/eertree-display.js"></script>
<link rel="stylesheet" href="/assets/css/eertree.css">

[Eertree][2] (or palindrome tree) is a data structure used for searching palindromes in a string. It was invented in 2015 by Mikhail Rubinchik and Arseny M. Shur. The name itself is a palindrome, derived from the word "tree". [The paper][1] is pretty straightforward as far as papers go, but it can be a bit confusing at first. 

It’s easier to understand when you see how it’s built step by step. You can use the textbox below to type a string and see how it would be represented in an eertree. You can also read through the description first and come back to try it out afterwards.

 <input type="text" id="string-input" placeholder="Enter a string"/>

<div id="graph1" class="eertree-container"></div>

<script>
    display({
        targetId: "graph1",
        inputId: "string-input"
    })
</script>

## How it works

![description][3]

Before we dive into implementation details, let’s take a moment to classify palindromes into three types:

1. Single characters, pretty straightforward.

2. A pair of the same character (eg: aa). All even-length palindromes have one in the middle.

3. A pair of the same character "surrounding" another palindrome (type 1, 2 or 3).

As you can see, you can make a longer palindrome simply by adding the same character to both ends.

<p id="palindrome-example">
    <span>...</span>
    <span style="color: #85144B">a</span>
    <span style="color: #e9a94b">b</span>
    <span style="color: #01FF70">c</span>
    <span style="color: blue">d</span>
    <span style="color: #01FF70">c</span>
    <span style="color: #e9a94b">d</span>
    <span style="color: #85144B">a</span>
    <span>...</span>
</p>

Each node in an eertree (apart from the special nodes) represents a palindrome. Since we know that every single character is a palindrome by itself, these nodes become the building blocks for larger palindromes.

A character edge, represented in black and pointing downwards, means the character surrounds the source palindrome. If the source palindrome has length n, the target palindrome will have length n + 2. Here's how it would look for the word **kayak**. 

<div id="graph2" class="eertree-container"></div>

<script>
    display({
        targetId: "graph2",
        value: "kayak",
        hideOddRoot: true,
        hideEvenRoot: true,
        markMaxSuffix: false
    })
</script>

We show the palindrome strings inside the nodes to make things easier to understand, but this isn’t required in an actual implementation. Usually, you’d just keep track of the length of each palindrome.

Suffix edges, represented in blue and pointing upwards, connect a palindrome to the longest palindrome suffix it has. For example "eve" has a suffix edge  to "e", and "eveve" connects to "eve". Each node has exactly one suffix edge. On the other hand, it can have zero or many character edges.

<div id="graph3" class="eertree-container"></div>

<script>
    display({
        targetId: "graph3",
        value: "eveve",
        hideOddRoot: true,
        hideEvenRoot: true,
        markMaxSuffix: false
    })
</script>

## Special nodes



[1]: https://arxiv.org/pdf/1506.04862
[2]: https://en.wikipedia.org/wiki/Palindrome_tree
[3]: /assets/img/palin.png